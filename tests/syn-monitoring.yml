applications:
  - prometheus

parameters:
  kapitan:
    dependencies:
      - type: https
        source: https://raw.githubusercontent.com/projectsyn/component-cert-manager/v2.2.0/lib/cert-manager.libsonnet
        output_path: vendor/lib/cert-manager.libsonnet
      - type: https
        source: https://raw.githubusercontent.com/projectsyn/component-patch-operator/v1.1.0/lib/patch-operator.libsonnet
        output_path: vendor/lib/patch-operator.libsonnet
      - type: https
        source: https://raw.githubusercontent.com/projectsyn/component-prometheus/master/lib/prometheus.libsonnet
        output_path: vendor/lib/prometheus.libsonnet

  patch_operator:
    patch_serviceaccount:
      name: patch-sa
    namespace: syn-patch-operator

  prometheus:
    defaultInstance: monitoring
    base: {}
    instances:
      monitoring:
        common:
          namespace: syn-monitoring
        prometheus:
          enabled: true

  openshift4_ingress:
    monitoring:
      enabled: true
      enableServiceMonitors:
        ingress-operator: true
    ingressControllers:
      foo:
        replicas: 2
        nodePlacement:
          nodeSelector:
            matchLabels:
              node-role.kubernetes.io/infra: ""
